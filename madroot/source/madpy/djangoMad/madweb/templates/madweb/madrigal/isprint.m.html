{% load static %}

<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>madrigal.isprint API documentation</title>
    <meta name="description" content="isprint.py is a module that creates new output files based on an input file and lists of parameters ..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
  <link href="/static/madrigal.css" rel="stylesheet" type="text/css" />
<style type="text/css">
	html body {
		background-color: {{bg_color}};
	}
</style>
</head>
<body>
<table width="100%" border="1" cellpadding="0" cellspacing="2" class="navigation">
  <tr>
    <td width="5%"><a href="derivation.m.html"><img src="/static/previous.png" alt="previous" width="32" height="32" /></a></td>
    <td width="5%"><a href="index.html"><img src="/static/up.png" alt="up" width="32" height="32" /></a></td>
    <td width="5%"><a href="metadata.m.html"><img src="/static/next.png" alt="next" width="32" height="32" /></a></td>
    <td width="54%">madrigal.isprint</td>
    <td width="13%"><a href="../madContents.html">Doc home </a></td>
    <td width="18%"><a href="/">Madrigal home</a></td>
  </tr>
</table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" href="derivation.m.html">madrigal.derivation </A>
<b class="navlabel">&nbsp;&nbsp;Up:</b>
<a class="sectref" href="index.html">Internal Madrigal Python API</A>
<b class="navlabel">&nbsp;&nbsp;Next:</b>
<a class="sectref" href="metadata.m.html">madrigal.metadata</A></div>
<hr/>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#madrigal.isprint.isRequest1D">isRequest1D</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#madrigal.isprint.Isprint">Isprint</a></span>
        
          
  <ul>
    <li class="mono"><a href="#madrigal.isprint.Isprint.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#madrigal.isprint.MadCalculatorGrid">MadCalculatorGrid</a></span>
        
          
  <ul>
    <li class="mono"><a href="#madrigal.isprint.MadCalculatorGrid.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#madrigal.isprint.MadCalculatorList">MadCalculatorList</a></span>
        
          
  <ul>
    <li class="mono"><a href="#madrigal.isprint.MadCalculatorList.__init__">__init__</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">madrigal.isprint</span> module</h1>
  <p>isprint.py is a module that creates new output files based on an input file and lists of parameters and filters.</p>
<p>$Id: isprint.py 7044 2019-10-07 19:13:16Z brideout $</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-madrigal.isprint', this);">Show source &equiv;</a></p>
  <div id="source-madrigal.isprint" class="source">
    <pre><code>"""isprint.py is a module that creates new output files based on an input file and lists of parameters and filters.

$Id: isprint.py 7044 2019-10-07 19:13:16Z brideout $
"""
# standard python imports
import os, os.path, sys
import datetime
import math
import tempfile
import shlex
import shutil
import random
import subprocess

# third party imports
import numpy

# Madrigal imports
import madrigal.cedar
import madrigal.derivation
import madrigal._derive

# public methods

def isRequest1D(existingFile, desiredParmList):
    """isRequest1D returns True if desiredParmList parms do not contain any measured or derivable 2D parms
    """
    non1DSet = madrigal.derivation.getUnderivableParms(existingFile.get1DParms(), desiredParmList)
    if len(non1DSet) == 0:
        return(True)
    # may also be True if all in non1DSet underivable
    underivableSet = madrigal.derivation.getUnderivableParms(existingFile.get1DParms() + existingFile.get2DParms(), 
                                                             desiredParmList)
    if len(non1DSet) == len(underivableSet):
        return(True)
    else:
        return(False)
    

class Isprint:
    
    def __init__(self, orgFilename, output, desiredParmList, filterList,
                 indSpatialParms=None,
                 summary='summary', showHeaders=False, 
                 missing=None, assumed=None, knownbad=None, ignoreEmptyFile=True):
        """
        Takes the input Cedar Hdf5 file and writes modified version
        
        Inputs:
            orgFilename - full path to original Cedar Hdf5 file
            output - output filename - If None, writes text file to stdout.  If given and extension is one of
                 <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
                 all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
                 assumed, and knownbad) ignored if given.
            desiredParmList - a list of ordered desired parameters as lower case mnemonics
            filterList - a list of 0 or more madrigal.derivation.MadrigalFilter objects
            indSpatialParms - a list of lower case mnemonics to use as independent spatial parameters.  If None
                (the default), use independent spatial parameters from original file.
            
            (The following arguments are ignored if not ascii format)
            
            summary - type of summary line to print at top.  Allowed values are:
                'plain' - text only mnemonic names, but only if not showHeaders
                'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
                'summary' - print overview of file and filters used. Also text only mnemonic names, 
                    but only if not showHeaders (default)
                None - no summary line
                
            showHeaders - if True, print header in format for each record.  If False, the default,
                do not.
                
            missing, assumed, knownbad - how to print Cedar special values.  Default is None for
                all, so that value printed in value in numpy table as per spec.
                
            (The following argument is ignored if ascii format)
            
            ignoreEmptyFile - if False, raise IOError when trying to create an Hdf5 or netCDF4
                file with no records.  If True (the default), then simply create 0 byte file. Ignored
                if output not hdf5 or netCDF4
        """
        self._numRec = 1000 # sets the number of records to load from the file at once. RAM/speed tradeoff
        
        # if orgFilename more than 2 MB in size, uncompress it first to speed things up
        if os.path.getsize(orgFilename) > 2E6:
            is_tmp = True
            orgFilename = self._getTempUncompressed(orgFilename)
        else:
            is_tmp = False
        
        startDT, endDT = self._getStartEndTimes(filterList)
        maxRecno = self._getMaxRecno(filterList) # sets a value only if recno used as a filter and max value given
        totalRecsLoaded = self._numRec
        
        if output is not None:
            fileName, fileExtension = os.path.splitext(output)
            if fileExtension.lower() in ('.hdf5', '.h5', '.hdf'):
                format = 'hdf5'
                tmpOutput = output
            elif fileExtension.lower() in ('.nc'):
                format = 'netCDF4'
                tmpOutput = fileName + '.hdf5'
            else:
                format = 'text'
                tmpOutput = None
        else:
            format = 'text'
            tmpOutput = None
        
        
        # this can fail if time filters too restrictive
        try:
            existingFile = madrigal.cedar.MadrigalCedarFile(orgFilename, startDatetime=startDT,
                                                            endDatetime=endDT, maxRecords=self._numRec)
        except ValueError:
            if is_tmp:
                os.remove(orgFilename)
            if format == 'text':
                # add message to text file
                if output is not None:
                    f = open(output, 'a')
                else:
                    f = sys.stdout
                f.write('\nNo records were selected with the filters selected\n')
                if output is not None:
                    f.close()
            elif not ignoreEmptyFile:
                raise IOError('No records selected with input time filters - unable to create file')
            
            else:
                # create empty file
                f = open(output, 'w')
                f.close()
            return
        
        # make sure some records loaded
        found = False
        try:
            oneD = existingFile.get1DParms()
            found = True
        except ValueError:
            while(True):
                result = existingFile.loadNextRecords(numRecords=self._numRec)
                if result[0] > 0:
                    found = True
                    break
                if result[1]:
                    break
                
        if not found:
            # no records with time restriction
            if is_tmp:
                os.remove(orgFilename)
            if format == 'text':
                # add message to text file
                if output is not None:
                    f = open(output, 'a')
                else:
                    f = sys.stdout
                f.write('\nNo records were selected with the filters selected\n')
                if output is not None:
                    f.close()
            elif not ignoreEmptyFile:
                raise IOError('No records selected with input time filters - unable to create file')
            
            else:
                # create empty file
                f = open(output, 'w')
                f.close()
            return
        

        # see if we need to extract any indSpatialParms or arraySplitParms from file
        if format in ('hdf5', 'netCDF4'):
            # check is this a one-D request
            is1D = isRequest1D(existingFile, desiredParmList)
            if not is1D:
                if indSpatialParms is None:
                    indSpatialParms = existingFile.getIndSpatialParms()
                arraySplitParms = existingFile.getArraySplitParms()
                for parm in indSpatialParms + arraySplitParms:
                    if type(parm) in (bytes, numpy.bytes_):
                        parm = parm.decode("ascii")
                    if parm.lower() not in desiredParmList:
                        desiredParmList.append(parm.lower())
            else:
                indSpatialParms = None
                arraySplitParms = None
        else:
            # not relevant to text files
            indSpatialParms = None
            arraySplitParms = None
            
        numRec = self._numRec
        
        madDevObj = madrigal.derivation.MadrigalDerivation(existingFile, desiredParmList, filterList, fullFilename=tmpOutput,
                                                           indParms=indSpatialParms, arraySplitParms=arraySplitParms)
        
        if len(madDevObj._madDerivationPlan.underivableFilterList) > 0:
            if format == 'text':
                # add message to text file
                if output is not None:
                    f = open(output, 'a')
                else:
                    f = sys.stdout
                f.write('\nNo records were selected with the filters above\n')
                if output is not None:
                    f.close()
            elif not ignoreEmptyFile:
                raise IOError('No records selected with input time filters')
            
            else:
                # create empty file
                f = open(output, 'w')
                f.close()
            if is_tmp:
                os.remove(orgFilename)
            return
        
        newFile = madDevObj.getNewCedarFile()
        
        isFirstWrite = True
        
        shouldBreak = False
        
        while (True):
            
            # output newFile in text or hdf5
            if format == 'text':
                newFile.writeText(newFilename=output, missing=missing, assumed=assumed, knownbad=knownbad, filterList=filterList, 
                                  summary=summary, showHeaders=showHeaders, selectParms=desiredParmList, append=True,
                                  firstWrite=isFirstWrite)
                # no need for another summary
                isFirstWrite = False
                
            else:
                newFile.dump()
                
            if shouldBreak:
                break
                
            numRec, isComplete = madDevObj.loadRecords(self._numRec)
            
            totalRecsLoaded += numRec
            if not maxRecno is None:
                if totalRecsLoaded > maxRecno:
                    break
                
            if isComplete:
                shouldBreak = True

                
        if madDevObj.getNumRecsAccepted() == 0:
            if format == 'text':
                # add message to text file
                if output is not None:
                    f = open(output, 'a')
                else:
                    f = sys.stdout
                f.write('\nNo records were selected with the filters above\n')
                if output is not None:
                    f.close()
            elif not ignoreEmptyFile:
                raise IOError('No records selected with input time filters')
            
            else:
                # create empty file
                f = open(output, 'w')
                f.close()
            if is_tmp:
                os.remove(orgFilename)
            return
            
        # if ascii, done
        if format == 'text':
            if is_tmp:
                os.remove(orgFilename)
            return
        
        else:
            newFile.close() # create Hdf5 array layout if needed
            
        if format == 'netCDF4':
            # convert from Hdf5 to netCDF4
            madrigal.cedar.convertToNetCDF4(tmpOutput, output)
            os.remove(tmpOutput)
            
        if is_tmp:
            os.remove(orgFilename)
            
        
        
    def _getStartEndTimes(self, filterList):
        """_getStartEndTimes is a private method that returns a tuple of (startDatetime, endDatetime)
        based on any ut1 or ut1_unix filters found in filterList. Implemented to speed up loading large files
        for only a subset of data. Returns (None, None) if no ut1 or ut1_unix filters
        
        Inputs - filterList - a list of 0 or more madrigal.derivation.MadrigalFilter objects
        
        Returns: tuple of (startDatetime, endDatetime)
        based on any ut1 filters found in filterList. Implemented to speed up loading large files
        for only a subset of data. Returns (None, None) if no ut1 or ut1_unix filters
        """
        if len(filterList) == 0:
            return((None, None))
        
        startDT = None
        endDT = None
        for filt in filterList:
            if filt.mnemonic1 == 'ut1' and filt.mnemonic2 is None:
                if len(filt.rangeList) == 1:
                    if not filt.rangeList[0][0] is None:
                        if not math.isnan(filt.rangeList[0][0]):
                            if startDT is None:
                                startDT = filt.rangeList[0][0]
                            elif startDT < filt.rangeList[0][0]:
                                startDT = filt.rangeList[0][0]
                    if not filt.rangeList[0][1] is None:
                        if not math.isnan(filt.rangeList[0][1]):
                            if endDT is None:
                                endDT = filt.rangeList[0][1]
                            elif endDT > filt.rangeList[0][1]:
                                endDT = filt.rangeList[0][1]
                            
                    if not startDT is None:
                        dtList = madrigal._derive.getDateFromUt(startDT)[0:6]
                        startDT = datetime.datetime(*dtList)
                    if not endDT is None:
                        dtList = madrigal._derive.getDateFromUt(endDT)[0:6]
                        endDT = datetime.datetime(*dtList)
                    return((startDT, endDT))
                
            elif filt.mnemonic1 == 'ut1_unix' and filt.mnemonic2 is None:
                if len(filt.rangeList) == 1:
                    if not filt.rangeList[0][0] is None:
                        if not math.isnan(filt.rangeList[0][0]):
                            if startDT is None:
                                startDT = filt.rangeList[0][0]
                            elif startDT < filt.rangeList[0][0]:
                                startDT = filt.rangeList[0][0]
                    if not filt.rangeList[0][1] is None:
                        if not math.isnan(filt.rangeList[0][1]):
                            if endDT is None:
                                endDT = filt.rangeList[0][1]
                            elif endDT > filt.rangeList[0][1]:
                                endDT = filt.rangeList[0][1]
                            
                    if not startDT is None:
                        startDT = datetime.datetime.utcfromtimestamp(startDT)
                    if not endDT is None:
                        endDT = datetime.datetime.utcfromtimestamp(endDT)
                    return((startDT, endDT))
            
        return((None, None))
        
    
    
    def _getMaxRecno(self, filterList):
        """_getMaxRecno is a private method that returns a the max recno if recno used as a filter.
        Implemented to speed up loading large files
        for only a subset of data. Returns None if no recno filter
        
        Inputs - filterList - a list of 0 or more madrigal.derivation.MadrigalFilter objects
        
        Returns: maxRecno, or None if no recno filter
        """
        if len(filterList) == 0:
            return(None)
        
        maxRecno = None
        for filt in filterList:
            if filt.mnemonic1 == 'recno' and filt.mnemonic2 is None:
                if len(filt.rangeList) == 1:
                    if not filt.rangeList[0][1] is None:
                        if not math.isnan(filt.rangeList[0][1]):
                            maxRecno = int(filt.rangeList[0][1])
                            
        return(maxRecno)
    
    
    def _getTempUncompressed(self, orgFilename):
        """_getTempUncompressed returns the full path to a temp version of the orgFilename where the Table Layout
        has been compressed.  If h5repack fails, simply copies intact version to temp name
        """
        tempDir = tempfile.gettempdir()
        tempFile = os.path.join(tempDir, '%i_%s' % (random.randint(0,1000000), os.path.basename(orgFilename)))
        cmd = 'h5repack -f Data/Table\ Layout:GZIP=0 %s %s' % (orgFilename, tempFile)
        try:
            subprocess.check_call(shlex.split(cmd))
        except subprocess.CalledProcessError:
            shutil.copy(orgFilename, tempFile)
            
        return(tempFile)
        
            
            
class MadCalculatorGrid:
    """MadCalculatorGrid is the class that runs the Madrigal derivation engine when there is no pre-existing file
    
    Called grid because it calculates points at each unique combination of input latitudes, longitudes, and altitudes.
    That is, number of points = len(latList) x len(lonList) x len(altList)
    """
    
    def __init__(self, output, desiredParmList, dtList, latList, lonList, altList, 
                 oneDParmDict=None, twoDParmDict=None,
                 summary='summary', showHeaders=False, 
                 missing=None, assumed=None, knownbad=None):
        """__init__ runs the madCalculatorGrid engine and creates destFile without existing input file.
        
        Inputs:
        
            output - output filename - If None, writes text file to stdout.  If given and extension is one of
                 <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
                 all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
                 assumed, and knownbad) ignored if given.
                 
            desiredParmList - a list of ordered desired parameters as lower case mnemonics
            
            dtList - a list of datetimes in UT, one for each record.  Length must be one or more.
            
        
            latList - a list of latitudes. May be zero length if a pure 1D calcuation. If one or more
                in length, each value must be unique.
            
            latList - a list of longitudes. May be zero length if a pure 1D calcuation. If one or more
                in length, each value must be unique.  Must be at least length 1 if latList length not 0.
                
            altList - a list of altitudes. May be zero length if a pure 1D calcuation. If one or more
                in length, each value must be unique.  Must be at least length 1 if latList length not 0.
                
            oneDParmDict - dict with keys = lower case one D parm mnemonics, values = parm values.  Length must be
                length of dtList.
                
            twoDParmDict - dict with keys = lower case two D parm mnemonics, values = 4D numpy array of values.  Shape must be
                (length of dtList, len of latList, len of lonList, len of altList).
                
            (The following arguments are ignored if not ascii format)
                
            summary - type of summary line to print at top.  Allowed values are:
                'plain' - text only mnemonic names, but only if not showHeaders
                'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
                'summary' - print overview of file and filters used. Also text only mnemonic names, 
                    but only if not showHeaders (default)
                None - no summary line
                
            showHeaders - if True, print header in format for each record.  If False, the default,
                do not.
                
            missing, assumed, knownbad - how to print Cedar special values.  Default is None for
                all, so that value printed in value in numpy table as per spec.
        
        """
        # tmpFile used as input file
        tmpFile = madrigal.derivation.createBaseMadrigalFileGrid(dtList, latList, lonList, altList,
                                                                 oneDParmDict, twoDParmDict)
        
        Isprint(tmpFile, output, desiredParmList, [],
                None, summary, showHeaders, 
                missing, assumed, knownbad)
        
        try:
            os.remove(tmpFile)
        except:
            pass
        
        
class MadCalculatorList:
    """MadCalculatorList is a second class that runs the Madrigal derivation engine when there is no pre-existing file
    
    Called list because it calculates points at zip(latList, lonList, altList)
    That is, number of points = len(latList)
    """
    
    def __init__(self, output, desiredParmList, dtList, latList, lonList, altList, 
                 oneDParmDict=None, twoDParmDict=None,
                 summary='summary', showHeaders=False, 
                 missing=None, assumed=None, knownbad=None):
        """__init__ runs the madCalculatorList engine and creates destFile without existing input file.
        
        Inputs:
        
            output - output filename - If None, writes text file to stdout.  If given and extension is one of
                 <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
                 all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
                 assumed, and knownbad) ignored if given.
                 
            desiredParmList - a list of ordered desired parameters as lower case mnemonics
            
            dtList - a list of datetimes in UT, one for each record.  Length must be one or more.
            
        
            latList - a list of latitudes. May be zero length if a pure 1D calcuation. 
            
            latList - a list of longitudes. May be zero length if a pure 1D calcuation. Len must = len(latList)
                
            altList - a list of altitudes. May be zero length if a pure 1D calcuation. Len must = len(latList)
                
            oneDParmDict - dict with keys = lower case one D parm mnemonics, values = parm values.  Length must be
                length of dtList.
                
            twoDParmDict - dict with keys = lower case two D parm mnemonics, values numpy float array with shape 
                (len(dtList), len(latList))
                
            (The following arguments are ignored if not ascii format)
                
            summary - type of summary line to print at top.  Allowed values are:
                'plain' - text only mnemonic names, but only if not showHeaders
                'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
                'summary' - print overview of file and filters used. Also text only mnemonic names, 
                    but only if not showHeaders (default)
                None - no summary line
                
            showHeaders - if True, print header in format for each record.  If False, the default,
                do not.
                
            missing, assumed, knownbad - how to print Cedar special values.  Default is None for
                all, so that value printed in value in numpy table as per spec.
        
        """
        # tmpFile used as input file
        tmpFile = madrigal.derivation.createBaseMadrigalFileList(dtList, latList, lonList, altList,
                                                                 oneDParmDict, twoDParmDict)
        
        Isprint(tmpFile, output, desiredParmList, [],
                None, summary, showHeaders, 
                missing, assumed, knownbad)
        
        try:
            os.remove(tmpFile)
        except:
            pass
</code></pre>
  </div>

  </header>

  <section id="section-items">

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="madrigal.isprint.isRequest1D">
    <p>def <span class="ident">isRequest1D</span>(</p><p>existingFile, desiredParmList)</p>
    </div>
    

    
  
    <div class="desc"><p>isRequest1D returns True if desiredParmList parms do not contain any measured or derivable 2D parms</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-madrigal.isprint.isRequest1D', this);">Show source &equiv;</a></p>
  <div id="source-madrigal.isprint.isRequest1D" class="source">
    <pre><code>def isRequest1D(existingFile, desiredParmList):
    """isRequest1D returns True if desiredParmList parms do not contain any measured or derivable 2D parms
    """
    non1DSet = madrigal.derivation.getUnderivableParms(existingFile.get1DParms(), desiredParmList)
    if len(non1DSet) == 0:
        return(True)
    # may also be True if all in non1DSet underivable
    underivableSet = madrigal.derivation.getUnderivableParms(existingFile.get1DParms() + existingFile.get2DParms(), 
                                                             desiredParmList)
    if len(non1DSet) == len(underivableSet):
        return(True)
    else:
        return(False)
</code></pre>
  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="madrigal.isprint.Isprint" class="name">class <span class="ident">Isprint</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-madrigal.isprint.Isprint', this);">Show source &equiv;</a></p>
  <div id="source-madrigal.isprint.Isprint" class="source">
    <pre><code>class Isprint:
    
    def __init__(self, orgFilename, output, desiredParmList, filterList,
                 indSpatialParms=None,
                 summary='summary', showHeaders=False, 
                 missing=None, assumed=None, knownbad=None, ignoreEmptyFile=True):
        """
        Takes the input Cedar Hdf5 file and writes modified version
        
        Inputs:
            orgFilename - full path to original Cedar Hdf5 file
            output - output filename - If None, writes text file to stdout.  If given and extension is one of
                 <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
                 all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
                 assumed, and knownbad) ignored if given.
            desiredParmList - a list of ordered desired parameters as lower case mnemonics
            filterList - a list of 0 or more madrigal.derivation.MadrigalFilter objects
            indSpatialParms - a list of lower case mnemonics to use as independent spatial parameters.  If None
                (the default), use independent spatial parameters from original file.
            
            (The following arguments are ignored if not ascii format)
            
            summary - type of summary line to print at top.  Allowed values are:
                'plain' - text only mnemonic names, but only if not showHeaders
                'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
                'summary' - print overview of file and filters used. Also text only mnemonic names, 
                    but only if not showHeaders (default)
                None - no summary line
                
            showHeaders - if True, print header in format for each record.  If False, the default,
                do not.
                
            missing, assumed, knownbad - how to print Cedar special values.  Default is None for
                all, so that value printed in value in numpy table as per spec.
                
            (The following argument is ignored if ascii format)
            
            ignoreEmptyFile - if False, raise IOError when trying to create an Hdf5 or netCDF4
                file with no records.  If True (the default), then simply create 0 byte file. Ignored
                if output not hdf5 or netCDF4
        """
        self._numRec = 1000 # sets the number of records to load from the file at once. RAM/speed tradeoff
        
        # if orgFilename more than 2 MB in size, uncompress it first to speed things up
        if os.path.getsize(orgFilename) > 2E6:
            is_tmp = True
            orgFilename = self._getTempUncompressed(orgFilename)
        else:
            is_tmp = False
        
        startDT, endDT = self._getStartEndTimes(filterList)
        maxRecno = self._getMaxRecno(filterList) # sets a value only if recno used as a filter and max value given
        totalRecsLoaded = self._numRec
        
        if output is not None:
            fileName, fileExtension = os.path.splitext(output)
            if fileExtension.lower() in ('.hdf5', '.h5', '.hdf'):
                format = 'hdf5'
                tmpOutput = output
            elif fileExtension.lower() in ('.nc'):
                format = 'netCDF4'
                tmpOutput = fileName + '.hdf5'
            else:
                format = 'text'
                tmpOutput = None
        else:
            format = 'text'
            tmpOutput = None
        
        
        # this can fail if time filters too restrictive
        try:
            existingFile = madrigal.cedar.MadrigalCedarFile(orgFilename, startDatetime=startDT,
                                                            endDatetime=endDT, maxRecords=self._numRec)
        except ValueError:
            if is_tmp:
                os.remove(orgFilename)
            if format == 'text':
                # add message to text file
                if output is not None:
                    f = open(output, 'a')
                else:
                    f = sys.stdout
                f.write('\nNo records were selected with the filters selected\n')
                if output is not None:
                    f.close()
            elif not ignoreEmptyFile:
                raise IOError('No records selected with input time filters - unable to create file')
            
            else:
                # create empty file
                f = open(output, 'w')
                f.close()
            return
        
        # make sure some records loaded
        found = False
        try:
            oneD = existingFile.get1DParms()
            found = True
        except ValueError:
            while(True):
                result = existingFile.loadNextRecords(numRecords=self._numRec)
                if result[0] > 0:
                    found = True
                    break
                if result[1]:
                    break
                
        if not found:
            # no records with time restriction
            if is_tmp:
                os.remove(orgFilename)
            if format == 'text':
                # add message to text file
                if output is not None:
                    f = open(output, 'a')
                else:
                    f = sys.stdout
                f.write('\nNo records were selected with the filters selected\n')
                if output is not None:
                    f.close()
            elif not ignoreEmptyFile:
                raise IOError('No records selected with input time filters - unable to create file')
            
            else:
                # create empty file
                f = open(output, 'w')
                f.close()
            return
        

        # see if we need to extract any indSpatialParms or arraySplitParms from file
        if format in ('hdf5', 'netCDF4'):
            # check is this a one-D request
            is1D = isRequest1D(existingFile, desiredParmList)
            if not is1D:
                if indSpatialParms is None:
                    indSpatialParms = existingFile.getIndSpatialParms()
                arraySplitParms = existingFile.getArraySplitParms()
                for parm in indSpatialParms + arraySplitParms:
                    if type(parm) in (bytes, numpy.bytes_):
                        parm = parm.decode("ascii")
                    if parm.lower() not in desiredParmList:
                        desiredParmList.append(parm.lower())
            else:
                indSpatialParms = None
                arraySplitParms = None
        else:
            # not relevant to text files
            indSpatialParms = None
            arraySplitParms = None
            
        numRec = self._numRec
        
        madDevObj = madrigal.derivation.MadrigalDerivation(existingFile, desiredParmList, filterList, fullFilename=tmpOutput,
                                                           indParms=indSpatialParms, arraySplitParms=arraySplitParms)
        
        if len(madDevObj._madDerivationPlan.underivableFilterList) > 0:
            if format == 'text':
                # add message to text file
                if output is not None:
                    f = open(output, 'a')
                else:
                    f = sys.stdout
                f.write('\nNo records were selected with the filters above\n')
                if output is not None:
                    f.close()
            elif not ignoreEmptyFile:
                raise IOError('No records selected with input time filters')
            
            else:
                # create empty file
                f = open(output, 'w')
                f.close()
            if is_tmp:
                os.remove(orgFilename)
            return
        
        newFile = madDevObj.getNewCedarFile()
        
        isFirstWrite = True
        
        shouldBreak = False
        
        while (True):
            
            # output newFile in text or hdf5
            if format == 'text':
                newFile.writeText(newFilename=output, missing=missing, assumed=assumed, knownbad=knownbad, filterList=filterList, 
                                  summary=summary, showHeaders=showHeaders, selectParms=desiredParmList, append=True,
                                  firstWrite=isFirstWrite)
                # no need for another summary
                isFirstWrite = False
                
            else:
                newFile.dump()
                
            if shouldBreak:
                break
                
            numRec, isComplete = madDevObj.loadRecords(self._numRec)
            
            totalRecsLoaded += numRec
            if not maxRecno is None:
                if totalRecsLoaded > maxRecno:
                    break
                
            if isComplete:
                shouldBreak = True

                
        if madDevObj.getNumRecsAccepted() == 0:
            if format == 'text':
                # add message to text file
                if output is not None:
                    f = open(output, 'a')
                else:
                    f = sys.stdout
                f.write('\nNo records were selected with the filters above\n')
                if output is not None:
                    f.close()
            elif not ignoreEmptyFile:
                raise IOError('No records selected with input time filters')
            
            else:
                # create empty file
                f = open(output, 'w')
                f.close()
            if is_tmp:
                os.remove(orgFilename)
            return
            
        # if ascii, done
        if format == 'text':
            if is_tmp:
                os.remove(orgFilename)
            return
        
        else:
            newFile.close() # create Hdf5 array layout if needed
            
        if format == 'netCDF4':
            # convert from Hdf5 to netCDF4
            madrigal.cedar.convertToNetCDF4(tmpOutput, output)
            os.remove(tmpOutput)
            
        if is_tmp:
            os.remove(orgFilename)
            
        
        
    def _getStartEndTimes(self, filterList):
        """_getStartEndTimes is a private method that returns a tuple of (startDatetime, endDatetime)
        based on any ut1 or ut1_unix filters found in filterList. Implemented to speed up loading large files
        for only a subset of data. Returns (None, None) if no ut1 or ut1_unix filters
        
        Inputs - filterList - a list of 0 or more madrigal.derivation.MadrigalFilter objects
        
        Returns: tuple of (startDatetime, endDatetime)
        based on any ut1 filters found in filterList. Implemented to speed up loading large files
        for only a subset of data. Returns (None, None) if no ut1 or ut1_unix filters
        """
        if len(filterList) == 0:
            return((None, None))
        
        startDT = None
        endDT = None
        for filt in filterList:
            if filt.mnemonic1 == 'ut1' and filt.mnemonic2 is None:
                if len(filt.rangeList) == 1:
                    if not filt.rangeList[0][0] is None:
                        if not math.isnan(filt.rangeList[0][0]):
                            if startDT is None:
                                startDT = filt.rangeList[0][0]
                            elif startDT < filt.rangeList[0][0]:
                                startDT = filt.rangeList[0][0]
                    if not filt.rangeList[0][1] is None:
                        if not math.isnan(filt.rangeList[0][1]):
                            if endDT is None:
                                endDT = filt.rangeList[0][1]
                            elif endDT > filt.rangeList[0][1]:
                                endDT = filt.rangeList[0][1]
                            
                    if not startDT is None:
                        dtList = madrigal._derive.getDateFromUt(startDT)[0:6]
                        startDT = datetime.datetime(*dtList)
                    if not endDT is None:
                        dtList = madrigal._derive.getDateFromUt(endDT)[0:6]
                        endDT = datetime.datetime(*dtList)
                    return((startDT, endDT))
                
            elif filt.mnemonic1 == 'ut1_unix' and filt.mnemonic2 is None:
                if len(filt.rangeList) == 1:
                    if not filt.rangeList[0][0] is None:
                        if not math.isnan(filt.rangeList[0][0]):
                            if startDT is None:
                                startDT = filt.rangeList[0][0]
                            elif startDT < filt.rangeList[0][0]:
                                startDT = filt.rangeList[0][0]
                    if not filt.rangeList[0][1] is None:
                        if not math.isnan(filt.rangeList[0][1]):
                            if endDT is None:
                                endDT = filt.rangeList[0][1]
                            elif endDT > filt.rangeList[0][1]:
                                endDT = filt.rangeList[0][1]
                            
                    if not startDT is None:
                        startDT = datetime.datetime.utcfromtimestamp(startDT)
                    if not endDT is None:
                        endDT = datetime.datetime.utcfromtimestamp(endDT)
                    return((startDT, endDT))
            
        return((None, None))
        
    
    
    def _getMaxRecno(self, filterList):
        """_getMaxRecno is a private method that returns a the max recno if recno used as a filter.
        Implemented to speed up loading large files
        for only a subset of data. Returns None if no recno filter
        
        Inputs - filterList - a list of 0 or more madrigal.derivation.MadrigalFilter objects
        
        Returns: maxRecno, or None if no recno filter
        """
        if len(filterList) == 0:
            return(None)
        
        maxRecno = None
        for filt in filterList:
            if filt.mnemonic1 == 'recno' and filt.mnemonic2 is None:
                if len(filt.rangeList) == 1:
                    if not filt.rangeList[0][1] is None:
                        if not math.isnan(filt.rangeList[0][1]):
                            maxRecno = int(filt.rangeList[0][1])
                            
        return(maxRecno)
    
    
    def _getTempUncompressed(self, orgFilename):
        """_getTempUncompressed returns the full path to a temp version of the orgFilename where the Table Layout
        has been compressed.  If h5repack fails, simply copies intact version to temp name
        """
        tempDir = tempfile.gettempdir()
        tempFile = os.path.join(tempDir, '%i_%s' % (random.randint(0,1000000), os.path.basename(orgFilename)))
        cmd = 'h5repack -f Data/Table\ Layout:GZIP=0 %s %s' % (orgFilename, tempFile)
        try:
            subprocess.check_call(shlex.split(cmd))
        except subprocess.CalledProcessError:
            shutil.copy(orgFilename, tempFile)
            
        return(tempFile)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#madrigal.isprint.Isprint">Isprint</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="madrigal.isprint.Isprint.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, orgFilename, output, desiredParmList, filterList, indSpatialParms=None, summary=&#39;summary&#39;, showHeaders=False, missing=None, assumed=None, knownbad=None, ignoreEmptyFile=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Takes the input Cedar Hdf5 file and writes modified version</p>
<p>Inputs:
    orgFilename - full path to original Cedar Hdf5 file
    output - output filename - If None, writes text file to stdout.  If given and extension is one of
         &lt;.hdf5, .h5, .hdf&gt;, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
         all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
         assumed, and knownbad) ignored if given.
    desiredParmList - a list of ordered desired parameters as lower case mnemonics
    filterList - a list of 0 or more madrigal.derivation.MadrigalFilter objects
    indSpatialParms - a list of lower case mnemonics to use as independent spatial parameters.  If None
        (the default), use independent spatial parameters from original file.</p>
<pre><code>(The following arguments are ignored if not ascii format)

summary - type of summary line to print at top.  Allowed values are:
    'plain' - text only mnemonic names, but only if not showHeaders
    'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
    'summary' - print overview of file and filters used. Also text only mnemonic names, 
        but only if not showHeaders (default)
    None - no summary line

showHeaders - if True, print header in format for each record.  If False, the default,
    do not.

missing, assumed, knownbad - how to print Cedar special values.  Default is None for
    all, so that value printed in value in numpy table as per spec.

(The following argument is ignored if ascii format)

ignoreEmptyFile - if False, raise IOError when trying to create an Hdf5 or netCDF4
    file with no records.  If True (the default), then simply create 0 byte file. Ignored
    if output not hdf5 or netCDF4
</code></pre></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-madrigal.isprint.Isprint.__init__', this);">Show source &equiv;</a></p>
  <div id="source-madrigal.isprint.Isprint.__init__" class="source">
    <pre><code>def __init__(self, orgFilename, output, desiredParmList, filterList,
             indSpatialParms=None,
             summary='summary', showHeaders=False, 
             missing=None, assumed=None, knownbad=None, ignoreEmptyFile=True):
    """
    Takes the input Cedar Hdf5 file and writes modified version
    
    Inputs:
        orgFilename - full path to original Cedar Hdf5 file
        output - output filename - If None, writes text file to stdout.  If given and extension is one of
             <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
             all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
             assumed, and knownbad) ignored if given.
        desiredParmList - a list of ordered desired parameters as lower case mnemonics
        filterList - a list of 0 or more madrigal.derivation.MadrigalFilter objects
        indSpatialParms - a list of lower case mnemonics to use as independent spatial parameters.  If None
            (the default), use independent spatial parameters from original file.
        
        (The following arguments are ignored if not ascii format)
        
        summary - type of summary line to print at top.  Allowed values are:
            'plain' - text only mnemonic names, but only if not showHeaders
            'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
            'summary' - print overview of file and filters used. Also text only mnemonic names, 
                but only if not showHeaders (default)
            None - no summary line
            
        showHeaders - if True, print header in format for each record.  If False, the default,
            do not.
            
        missing, assumed, knownbad - how to print Cedar special values.  Default is None for
            all, so that value printed in value in numpy table as per spec.
            
        (The following argument is ignored if ascii format)
        
        ignoreEmptyFile - if False, raise IOError when trying to create an Hdf5 or netCDF4
            file with no records.  If True (the default), then simply create 0 byte file. Ignored
            if output not hdf5 or netCDF4
    """
    self._numRec = 1000 # sets the number of records to load from the file at once. RAM/speed tradeoff
    
    # if orgFilename more than 2 MB in size, uncompress it first to speed things up
    if os.path.getsize(orgFilename) > 2E6:
        is_tmp = True
        orgFilename = self._getTempUncompressed(orgFilename)
    else:
        is_tmp = False
    
    startDT, endDT = self._getStartEndTimes(filterList)
    maxRecno = self._getMaxRecno(filterList) # sets a value only if recno used as a filter and max value given
    totalRecsLoaded = self._numRec
    
    if output is not None:
        fileName, fileExtension = os.path.splitext(output)
        if fileExtension.lower() in ('.hdf5', '.h5', '.hdf'):
            format = 'hdf5'
            tmpOutput = output
        elif fileExtension.lower() in ('.nc'):
            format = 'netCDF4'
            tmpOutput = fileName + '.hdf5'
        else:
            format = 'text'
            tmpOutput = None
    else:
        format = 'text'
        tmpOutput = None
    
    
    # this can fail if time filters too restrictive
    try:
        existingFile = madrigal.cedar.MadrigalCedarFile(orgFilename, startDatetime=startDT,
                                                        endDatetime=endDT, maxRecords=self._numRec)
    except ValueError:
        if is_tmp:
            os.remove(orgFilename)
        if format == 'text':
            # add message to text file
            if output is not None:
                f = open(output, 'a')
            else:
                f = sys.stdout
            f.write('\nNo records were selected with the filters selected\n')
            if output is not None:
                f.close()
        elif not ignoreEmptyFile:
            raise IOError('No records selected with input time filters - unable to create file')
        
        else:
            # create empty file
            f = open(output, 'w')
            f.close()
        return
    
    # make sure some records loaded
    found = False
    try:
        oneD = existingFile.get1DParms()
        found = True
    except ValueError:
        while(True):
            result = existingFile.loadNextRecords(numRecords=self._numRec)
            if result[0] > 0:
                found = True
                break
            if result[1]:
                break
            
    if not found:
        # no records with time restriction
        if is_tmp:
            os.remove(orgFilename)
        if format == 'text':
            # add message to text file
            if output is not None:
                f = open(output, 'a')
            else:
                f = sys.stdout
            f.write('\nNo records were selected with the filters selected\n')
            if output is not None:
                f.close()
        elif not ignoreEmptyFile:
            raise IOError('No records selected with input time filters - unable to create file')
        
        else:
            # create empty file
            f = open(output, 'w')
            f.close()
        return
    
    # see if we need to extract any indSpatialParms or arraySplitParms from file
    if format in ('hdf5', 'netCDF4'):
        # check is this a one-D request
        is1D = isRequest1D(existingFile, desiredParmList)
        if not is1D:
            if indSpatialParms is None:
                indSpatialParms = existingFile.getIndSpatialParms()
            arraySplitParms = existingFile.getArraySplitParms()
            for parm in indSpatialParms + arraySplitParms:
                if type(parm) in (bytes, numpy.bytes_):
                    parm = parm.decode("ascii")
                if parm.lower() not in desiredParmList:
                    desiredParmList.append(parm.lower())
        else:
            indSpatialParms = None
            arraySplitParms = None
    else:
        # not relevant to text files
        indSpatialParms = None
        arraySplitParms = None
        
    numRec = self._numRec
    
    madDevObj = madrigal.derivation.MadrigalDerivation(existingFile, desiredParmList, filterList, fullFilename=tmpOutput,
                                                       indParms=indSpatialParms, arraySplitParms=arraySplitParms)
    
    if len(madDevObj._madDerivationPlan.underivableFilterList) > 0:
        if format == 'text':
            # add message to text file
            if output is not None:
                f = open(output, 'a')
            else:
                f = sys.stdout
            f.write('\nNo records were selected with the filters above\n')
            if output is not None:
                f.close()
        elif not ignoreEmptyFile:
            raise IOError('No records selected with input time filters')
        
        else:
            # create empty file
            f = open(output, 'w')
            f.close()
        if is_tmp:
            os.remove(orgFilename)
        return
    
    newFile = madDevObj.getNewCedarFile()
    
    isFirstWrite = True
    
    shouldBreak = False
    
    while (True):
        
        # output newFile in text or hdf5
        if format == 'text':
            newFile.writeText(newFilename=output, missing=missing, assumed=assumed, knownbad=knownbad, filterList=filterList, 
                              summary=summary, showHeaders=showHeaders, selectParms=desiredParmList, append=True,
                              firstWrite=isFirstWrite)
            # no need for another summary
            isFirstWrite = False
            
        else:
            newFile.dump()
            
        if shouldBreak:
            break
            
        numRec, isComplete = madDevObj.loadRecords(self._numRec)
        
        totalRecsLoaded += numRec
        if not maxRecno is None:
            if totalRecsLoaded > maxRecno:
                break
            
        if isComplete:
            shouldBreak = True
            
    if madDevObj.getNumRecsAccepted() == 0:
        if format == 'text':
            # add message to text file
            if output is not None:
                f = open(output, 'a')
            else:
                f = sys.stdout
            f.write('\nNo records were selected with the filters above\n')
            if output is not None:
                f.close()
        elif not ignoreEmptyFile:
            raise IOError('No records selected with input time filters')
        
        else:
            # create empty file
            f = open(output, 'w')
            f.close()
        if is_tmp:
            os.remove(orgFilename)
        return
        
    # if ascii, done
    if format == 'text':
        if is_tmp:
            os.remove(orgFilename)
        return
    
    else:
        newFile.close() # create Hdf5 array layout if needed
        
    if format == 'netCDF4':
        # convert from Hdf5 to netCDF4
        madrigal.cedar.convertToNetCDF4(tmpOutput, output)
        os.remove(tmpOutput)
        
    if is_tmp:
        os.remove(orgFilename)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="madrigal.isprint.MadCalculatorGrid" class="name">class <span class="ident">MadCalculatorGrid</span></p>
      
  
    <div class="desc"><p>MadCalculatorGrid is the class that runs the Madrigal derivation engine when there is no pre-existing file</p>
<p>Called grid because it calculates points at each unique combination of input latitudes, longitudes, and altitudes.
That is, number of points = len(latList) x len(lonList) x len(altList)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-madrigal.isprint.MadCalculatorGrid', this);">Show source &equiv;</a></p>
  <div id="source-madrigal.isprint.MadCalculatorGrid" class="source">
    <pre><code>class MadCalculatorGrid:
    """MadCalculatorGrid is the class that runs the Madrigal derivation engine when there is no pre-existing file
    
    Called grid because it calculates points at each unique combination of input latitudes, longitudes, and altitudes.
    That is, number of points = len(latList) x len(lonList) x len(altList)
    """
    
    def __init__(self, output, desiredParmList, dtList, latList, lonList, altList, 
                 oneDParmDict=None, twoDParmDict=None,
                 summary='summary', showHeaders=False, 
                 missing=None, assumed=None, knownbad=None):
        """__init__ runs the madCalculatorGrid engine and creates destFile without existing input file.
        
        Inputs:
        
            output - output filename - If None, writes text file to stdout.  If given and extension is one of
                 <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
                 all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
                 assumed, and knownbad) ignored if given.
                 
            desiredParmList - a list of ordered desired parameters as lower case mnemonics
            
            dtList - a list of datetimes in UT, one for each record.  Length must be one or more.
            
        
            latList - a list of latitudes. May be zero length if a pure 1D calcuation. If one or more
                in length, each value must be unique.
            
            latList - a list of longitudes. May be zero length if a pure 1D calcuation. If one or more
                in length, each value must be unique.  Must be at least length 1 if latList length not 0.
                
            altList - a list of altitudes. May be zero length if a pure 1D calcuation. If one or more
                in length, each value must be unique.  Must be at least length 1 if latList length not 0.
                
            oneDParmDict - dict with keys = lower case one D parm mnemonics, values = parm values.  Length must be
                length of dtList.
                
            twoDParmDict - dict with keys = lower case two D parm mnemonics, values = 4D numpy array of values.  Shape must be
                (length of dtList, len of latList, len of lonList, len of altList).
                
            (The following arguments are ignored if not ascii format)
                
            summary - type of summary line to print at top.  Allowed values are:
                'plain' - text only mnemonic names, but only if not showHeaders
                'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
                'summary' - print overview of file and filters used. Also text only mnemonic names, 
                    but only if not showHeaders (default)
                None - no summary line
                
            showHeaders - if True, print header in format for each record.  If False, the default,
                do not.
                
            missing, assumed, knownbad - how to print Cedar special values.  Default is None for
                all, so that value printed in value in numpy table as per spec.
        
        """
        # tmpFile used as input file
        tmpFile = madrigal.derivation.createBaseMadrigalFileGrid(dtList, latList, lonList, altList,
                                                                 oneDParmDict, twoDParmDict)
        
        Isprint(tmpFile, output, desiredParmList, [],
                None, summary, showHeaders, 
                missing, assumed, knownbad)
        
        try:
            os.remove(tmpFile)
        except:
            pass
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#madrigal.isprint.MadCalculatorGrid">MadCalculatorGrid</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="madrigal.isprint.MadCalculatorGrid.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, output, desiredParmList, dtList, latList, lonList, altList, oneDParmDict=None, twoDParmDict=None, summary=&#39;summary&#39;, showHeaders=False, missing=None, assumed=None, knownbad=None)</p>
    </div>
    

    
  
    <div class="desc"><p><strong>init</strong> runs the madCalculatorGrid engine and creates destFile without existing input file.</p>
<p>Inputs:</p>
<pre><code>output - output filename - If None, writes text file to stdout.  If given and extension is one of
     &lt;.hdf5, .h5, .hdf&gt;, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
     all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
     assumed, and knownbad) ignored if given.

desiredParmList - a list of ordered desired parameters as lower case mnemonics

dtList - a list of datetimes in UT, one for each record.  Length must be one or more.


latList - a list of latitudes. May be zero length if a pure 1D calcuation. If one or more
    in length, each value must be unique.

latList - a list of longitudes. May be zero length if a pure 1D calcuation. If one or more
    in length, each value must be unique.  Must be at least length 1 if latList length not 0.

altList - a list of altitudes. May be zero length if a pure 1D calcuation. If one or more
    in length, each value must be unique.  Must be at least length 1 if latList length not 0.

oneDParmDict - dict with keys = lower case one D parm mnemonics, values = parm values.  Length must be
    length of dtList.

twoDParmDict - dict with keys = lower case two D parm mnemonics, values = 4D numpy array of values.  Shape must be
    (length of dtList, len of latList, len of lonList, len of altList).

(The following arguments are ignored if not ascii format)

summary - type of summary line to print at top.  Allowed values are:
    'plain' - text only mnemonic names, but only if not showHeaders
    'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
    'summary' - print overview of file and filters used. Also text only mnemonic names, 
        but only if not showHeaders (default)
    None - no summary line

showHeaders - if True, print header in format for each record.  If False, the default,
    do not.

missing, assumed, knownbad - how to print Cedar special values.  Default is None for
    all, so that value printed in value in numpy table as per spec.
</code></pre></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-madrigal.isprint.MadCalculatorGrid.__init__', this);">Show source &equiv;</a></p>
  <div id="source-madrigal.isprint.MadCalculatorGrid.__init__" class="source">
    <pre><code>def __init__(self, output, desiredParmList, dtList, latList, lonList, altList, 
             oneDParmDict=None, twoDParmDict=None,
             summary='summary', showHeaders=False, 
             missing=None, assumed=None, knownbad=None):
    """__init__ runs the madCalculatorGrid engine and creates destFile without existing input file.
    
    Inputs:
    
        output - output filename - If None, writes text file to stdout.  If given and extension is one of
             <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
             all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
             assumed, and knownbad) ignored if given.
             
        desiredParmList - a list of ordered desired parameters as lower case mnemonics
        
        dtList - a list of datetimes in UT, one for each record.  Length must be one or more.
        
    
        latList - a list of latitudes. May be zero length if a pure 1D calcuation. If one or more
            in length, each value must be unique.
        
        latList - a list of longitudes. May be zero length if a pure 1D calcuation. If one or more
            in length, each value must be unique.  Must be at least length 1 if latList length not 0.
            
        altList - a list of altitudes. May be zero length if a pure 1D calcuation. If one or more
            in length, each value must be unique.  Must be at least length 1 if latList length not 0.
            
        oneDParmDict - dict with keys = lower case one D parm mnemonics, values = parm values.  Length must be
            length of dtList.
            
        twoDParmDict - dict with keys = lower case two D parm mnemonics, values = 4D numpy array of values.  Shape must be
            (length of dtList, len of latList, len of lonList, len of altList).
            
        (The following arguments are ignored if not ascii format)
            
        summary - type of summary line to print at top.  Allowed values are:
            'plain' - text only mnemonic names, but only if not showHeaders
            'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
            'summary' - print overview of file and filters used. Also text only mnemonic names, 
                but only if not showHeaders (default)
            None - no summary line
            
        showHeaders - if True, print header in format for each record.  If False, the default,
            do not.
            
        missing, assumed, knownbad - how to print Cedar special values.  Default is None for
            all, so that value printed in value in numpy table as per spec.
    
    """
    # tmpFile used as input file
    tmpFile = madrigal.derivation.createBaseMadrigalFileGrid(dtList, latList, lonList, altList,
                                                             oneDParmDict, twoDParmDict)
    
    Isprint(tmpFile, output, desiredParmList, [],
            None, summary, showHeaders, 
            missing, assumed, knownbad)
    
    try:
        os.remove(tmpFile)
    except:
        pass
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="madrigal.isprint.MadCalculatorList" class="name">class <span class="ident">MadCalculatorList</span></p>
      
  
    <div class="desc"><p>MadCalculatorList is a second class that runs the Madrigal derivation engine when there is no pre-existing file</p>
<p>Called list because it calculates points at zip(latList, lonList, altList)
That is, number of points = len(latList)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-madrigal.isprint.MadCalculatorList', this);">Show source &equiv;</a></p>
  <div id="source-madrigal.isprint.MadCalculatorList" class="source">
    <pre><code>class MadCalculatorList:
    """MadCalculatorList is a second class that runs the Madrigal derivation engine when there is no pre-existing file
    
    Called list because it calculates points at zip(latList, lonList, altList)
    That is, number of points = len(latList)
    """
    
    def __init__(self, output, desiredParmList, dtList, latList, lonList, altList, 
                 oneDParmDict=None, twoDParmDict=None,
                 summary='summary', showHeaders=False, 
                 missing=None, assumed=None, knownbad=None):
        """__init__ runs the madCalculatorList engine and creates destFile without existing input file.
        
        Inputs:
        
            output - output filename - If None, writes text file to stdout.  If given and extension is one of
                 <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
                 all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
                 assumed, and knownbad) ignored if given.
                 
            desiredParmList - a list of ordered desired parameters as lower case mnemonics
            
            dtList - a list of datetimes in UT, one for each record.  Length must be one or more.
            
        
            latList - a list of latitudes. May be zero length if a pure 1D calcuation. 
            
            latList - a list of longitudes. May be zero length if a pure 1D calcuation. Len must = len(latList)
                
            altList - a list of altitudes. May be zero length if a pure 1D calcuation. Len must = len(latList)
                
            oneDParmDict - dict with keys = lower case one D parm mnemonics, values = parm values.  Length must be
                length of dtList.
                
            twoDParmDict - dict with keys = lower case two D parm mnemonics, values numpy float array with shape 
                (len(dtList), len(latList))
                
            (The following arguments are ignored if not ascii format)
                
            summary - type of summary line to print at top.  Allowed values are:
                'plain' - text only mnemonic names, but only if not showHeaders
                'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
                'summary' - print overview of file and filters used. Also text only mnemonic names, 
                    but only if not showHeaders (default)
                None - no summary line
                
            showHeaders - if True, print header in format for each record.  If False, the default,
                do not.
                
            missing, assumed, knownbad - how to print Cedar special values.  Default is None for
                all, so that value printed in value in numpy table as per spec.
        
        """
        # tmpFile used as input file
        tmpFile = madrigal.derivation.createBaseMadrigalFileList(dtList, latList, lonList, altList,
                                                                 oneDParmDict, twoDParmDict)
        
        Isprint(tmpFile, output, desiredParmList, [],
                None, summary, showHeaders, 
                missing, assumed, knownbad)
        
        try:
            os.remove(tmpFile)
        except:
            pass
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#madrigal.isprint.MadCalculatorList">MadCalculatorList</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="madrigal.isprint.MadCalculatorList.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, output, desiredParmList, dtList, latList, lonList, altList, oneDParmDict=None, twoDParmDict=None, summary=&#39;summary&#39;, showHeaders=False, missing=None, assumed=None, knownbad=None)</p>
    </div>
    

    
  
    <div class="desc"><p><strong>init</strong> runs the madCalculatorList engine and creates destFile without existing input file.</p>
<p>Inputs:</p>
<pre><code>output - output filename - If None, writes text file to stdout.  If given and extension is one of
     &lt;.hdf5, .h5, .hdf&gt;, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
     all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
     assumed, and knownbad) ignored if given.

desiredParmList - a list of ordered desired parameters as lower case mnemonics

dtList - a list of datetimes in UT, one for each record.  Length must be one or more.


latList - a list of latitudes. May be zero length if a pure 1D calcuation.

latList - a list of longitudes. May be zero length if a pure 1D calcuation. Len must = len(latList)

altList - a list of altitudes. May be zero length if a pure 1D calcuation. Len must = len(latList)

oneDParmDict - dict with keys = lower case one D parm mnemonics, values = parm values.  Length must be
    length of dtList.

twoDParmDict - dict with keys = lower case two D parm mnemonics, values numpy float array with shape 
    (len(dtList), len(latList))

(The following arguments are ignored if not ascii format)

summary - type of summary line to print at top.  Allowed values are:
    'plain' - text only mnemonic names, but only if not showHeaders
    'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
    'summary' - print overview of file and filters used. Also text only mnemonic names, 
        but only if not showHeaders (default)
    None - no summary line

showHeaders - if True, print header in format for each record.  If False, the default,
    do not.

missing, assumed, knownbad - how to print Cedar special values.  Default is None for
    all, so that value printed in value in numpy table as per spec.
</code></pre></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-madrigal.isprint.MadCalculatorList.__init__', this);">Show source &equiv;</a></p>
  <div id="source-madrigal.isprint.MadCalculatorList.__init__" class="source">
    <pre><code>def __init__(self, output, desiredParmList, dtList, latList, lonList, altList, 
             oneDParmDict=None, twoDParmDict=None,
             summary='summary', showHeaders=False, 
             missing=None, assumed=None, knownbad=None):
    """__init__ runs the madCalculatorList engine and creates destFile without existing input file.
    
    Inputs:
    
        output - output filename - If None, writes text file to stdout.  If given and extension is one of
             <.hdf5, .h5, .hdf>, then will save as Hdf5 file.  If extension is .nc, will be saved as netCDF4. In
             all other cases, will be saved as ascii text.  If hdf5 or netCDF4, arguments (header, summary, badval,
             assumed, and knownbad) ignored if given.
             
        desiredParmList - a list of ordered desired parameters as lower case mnemonics
        
        dtList - a list of datetimes in UT, one for each record.  Length must be one or more.
        
    
        latList - a list of latitudes. May be zero length if a pure 1D calcuation. 
        
        latList - a list of longitudes. May be zero length if a pure 1D calcuation. Len must = len(latList)
            
        altList - a list of altitudes. May be zero length if a pure 1D calcuation. Len must = len(latList)
            
        oneDParmDict - dict with keys = lower case one D parm mnemonics, values = parm values.  Length must be
            length of dtList.
            
        twoDParmDict - dict with keys = lower case two D parm mnemonics, values numpy float array with shape 
            (len(dtList), len(latList))
            
        (The following arguments are ignored if not ascii format)
            
        summary - type of summary line to print at top.  Allowed values are:
            'plain' - text only mnemonic names, but only if not showHeaders
            'html' - mnemonic names wrapped in standard javascript code to allow descriptive popups
            'summary' - print overview of file and filters used. Also text only mnemonic names, 
                but only if not showHeaders (default)
            None - no summary line
            
        showHeaders - if True, print header in format for each record.  If False, the default,
            do not.
            
        missing, assumed, knownbad - how to print Cedar special values.  Default is None for
            all, so that value printed in value in numpy table as per spec.
    
    """
    # tmpFile used as input file
    tmpFile = madrigal.derivation.createBaseMadrigalFileList(dtList, latList, lonList, altList,
                                                             oneDParmDict, twoDParmDict)
    
    Isprint(tmpFile, output, desiredParmList, [],
            None, summary, showHeaders, 
            missing, assumed, knownbad)
    
    try:
        os.remove(tmpFile)
    except:
        pass
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
<table width="100%" border="1" cellpadding="0" cellspacing="2" class="navigation">
  <tr>
    <td width="5%"><a href="derivation.m.html"><img src="/static/previous.png" alt="previous" width="32" height="32" /></a></td>
    <td width="5%"><a href="index.html"><img src="/static/up.png" alt="up" width="32" height="32" /></a></td>
    <td width="5%"><a href="metadata.m.html"><img src="/static/next.png" alt="next" width="32" height="32" /></a></td>
    <td width="54%">madrigal.cedar</td>
    <td width="13%"><a href="../madContents.html">Doc home </a></td>
    <td width="18%"><a href="/">Madrigal home</a></td>
  </tr>
</table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" href="derivation.m.html">madrigal.derivation </A>
<b class="navlabel">&nbsp;&nbsp;Up:</b>
<a class="sectref" href="index.html">Internal Madrigal Python API</A>
<b class="navlabel">&nbsp;&nbsp;Next:</b>
<a class="sectref" href="metadata.m.html">madrigal.metadata</A></div>
<hr/>
<p>&nbsp;</p>
</body>
</html>
