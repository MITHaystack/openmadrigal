{% extends "base.html" %}

{% comment %}
	Written by Bill Rideout brideout@haystack.mit.edu
	
	Base template for Madrigal download advanced script interface
	
	$Id: download_advanced_script.html 6383 2017-12-18 20:33:09Z brideout $
{% endcomment %}

{% block title %}Create download advanced script{% endblock %}

{% block extra_head %}
    {% include "madweb/generate_download_advanced_javascript.html" %}
{% endblock %}

{% block content %}	
    <center><h4>Create a script command to download Madrigal data with selected parameters and filters</h4></center>
	
	<div class="row">
	<form id="id_form">
	
		<div class="col-sm-6">
			<div class="col-md-12">
				{{ form.categories.label }}<br>
				{{ form.categories }}
				<p></p>
			</div> <!-- end subdivide -->
			<div class="col-md-12">
				{{ form.instruments.label }}&nbsp;&nbsp;<i>(Year range shows data available):</i><br>
				{{ form.instruments }}
			</div> <!-- end subdivide -->
			<div class="col-md-12">
			    <p></p>
				{{ form.format_select.label }}
				{{ form.format_select }}
			</div> <!-- end subdivide -->
			<div class="col-md-12">
			    <p></p>
				{{ form.directory_select.label }}
				{{ form.directory_select }}
			</div> <!-- end subdivide -->
			<div class="col-md-12">
			    <p></p>
				{{ form.language_select.label }}
				{{ form.language_select }}
			</div> <!-- end subdivide -->
			
		</div>
		
		<div class="col-sm-6">
			<div class="col-md-12">
				{{ form.start_date.label }}<br>
				{{ form.start_date }}
			    <p></p>
			</div> <!-- end subdivide -->
			<div class="col-md-12">
				{{ form.end_date.label }}<br>
				{{ form.end_date }}
			    <p></p>
			</div> <!-- end subdivide -->
			
		</div>
	
	</div> <!-- class=row -->
	
	<div class="panel-group" id="accordion">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">
					<a href="#parameter_panel" class="accordion-toggle" data-toggle="collapse" data-parent="#accordion">Select parameters (required) <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></a>
				</h3>
			</div> <!-- end panel-heading -->
			<div id="parameter_panel" class="panel-collapse collapse">
				<div class="panel-body">
				
				<div class="row">
				
					<div id="id_parms_div">
						<p><strong>Please select an instrument above first to see possible parameters available with that instrument</strong></p>
					</div><!-- end id_parms_div -->
				    
				</div> <!-- class=row -->
				
				</div> <!-- end panel-body -->
			</div> <!-- end panel-collapse -->
		</div> <!-- end panel-primary -->
		
		<div class="panel panel-primary">
		<div class="panel-heading">
				<h3 class="panel-title">
					<a href="#optional_panel" class="accordion-toggle" data-toggle="collapse" data-parent="#accordion">Optional filters: kinds of data, filter by parm, experiment names, etc <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></a>
				</h3>
			</div> <!-- end panel-heading -->
			<div id="optional_panel" class="panel-collapse collapse">
				<div class="panel-body">
				
				<div class="row">
				
					<div class="col-sm-6">
					    {{ form.kindat_select.label }}<br>
						{{ form.kindat_select }}
					</div>
					
					<div class="col-sm-3">
						<a data-toggle="tooltip" data-original-title="To filter by experiment name, enter all or part of an experiment name (case insensitive, do not use wildcards).  Leave blank for all experiment names." data-placement="bottom">Filter experiments by name: </a>
						{{ form.expName }}
					</div>
					
					<div class="col-sm-3">
						<a data-toggle="tooltip" data-original-title="To filter by file description string, enter all or part of a file description string (case insensitive, do not use wildcards).  Leave blank for all files." data-placement="bottom">Filter files by description: </a>
						{{ form.fileDesc }}
					</div>
				    
				</div> <!-- class=row -->
				
				<p></p><p><i> Select data from only a part of the year by changing the values below:</i></p>
				
				<div class="row">
			
					<div class="col-sm-6">
					   Optional seasonal start day/month: {{ form.seasonalStartDay }} {{ form.seasonalStartMonth }} 
					</div>
					
					<div class="col-sm-6">
					   Optional seasonal end day/month: {{ form.seasonalEndDay }} {{ form.seasonalEndMonth }} 
					</div>
				    
				</div> <!-- class=row -->
				
				<p></p><p><i> Add optional filters based on parameter values below:</i></p>
				
				<div class="row">
				
					<div id="id_parms_filters_div">
						<p><strong>Please select an instrument above first to see parameter filters<strong></p>
					</div><!-- end id_parms_filters_div -->
				    
				</div> <!-- class=row -->
				
				</div> <!-- end panel-body -->
			</div> <!-- end panel-collapse -->
		</div> <!-- end panel-primary -->
		
	</div> <!-- end panel-group -->
	
	<div> <!-- button div -->
    <center>
        <button  type="button" class="btn btn-primary"  data-toggle="tooltip" data-original-title="Click this button to generate the needed command in the language of your choice." data-placement="bottom" onclick="generateCommand(this.form)">Generate command</button>
    </center>
	</div>
	
	</form>
	
	<br>
	<div><pre id="script_output"></pre></div>
	
	</div> <!-- container-fluid -->
{% endblock %}